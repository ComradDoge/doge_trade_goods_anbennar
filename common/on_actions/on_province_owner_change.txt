on_province_owner_change = {
	events = {
		# japan.1
		one_xia.1
		rahenraj.1
		unraveling.10
		spirits.006 #Temple restoration/corruption/purification cleanup
		spirits.010 #More temple stuff
		flavor_nuugdan_tsarai.84 #fanwang system
	}
	on_province_owner_change_government_effect = yes
	on_province_owner_change_estate_privileges_effect = yes
	#judaism_on_province_change_religion_or_change_owner_effect = yes #Anbennar
	#imperial_modifiers_on_province_change_culture_or_change_owner_effect  = yes #Anbennar

	#Anbennar
	#Krakazol/Rahen initial friendship, formerly rahen.1
	if = {
		limit = {
			province_id = 4266
			owner = { culture_group = dwarven has_reform = dwarovar_adventurer_reform }
			4462 = { #keppakazol
				owner = {
					is_subject = no
					NOT = { tag = R62 }
				}
			}
		}
		4462 = { owner = { country_event = { id = rahen.1 days = 60 } } } #delay so ai attitude switches from unknown
	}

	#Black Orc trophies
	if = { # take trophy for blorc.
		limit = { owner = { primary_culture = black_orc } }
		trigger_switch = {
			on_trigger = province_id
			2863 = { province_event = { id = blorc.2863 } }
			2868 = { province_event = { id = blorc.2868 } }
			4119 = { province_event = { id = blorc.4119 } }
			4208 = { province_event = { id = blorc.4208 } }
			4020 = { province_event = { id = blorc.4020 } }
			4147 = { province_event = { id = blorc.4147 } }
			4236 = { province_event = { id = blorc.4236 } }
			2931 = { province_event = { id = blorc.2931 } }
			4056 = { province_event = { id = blorc.4056 } }
			2963 = { province_event = { id = blorc.2963 } }
			4238 = { province_event = { id = blorc.4238 } }
			2942 = { province_event = { id = blorc.2942 } }
			4093 = { province_event = { id = blorc.4093 } }
			4100 = { province_event = { id = blorc.4100 } }
			2973 = { province_event = { id = blorc.2973 } }
			4039 = { province_event = { id = blorc.4039 } }
			4217 = { province_event = { id = blorc.4217 } }
			4078 = { province_event = { id = blorc.4078 } }
			4124 = { province_event = { id = blorc.4124 } }
			2914 = { province_event = { id = blorc.2914 } }
			4218 = { province_event = { id = blorc.4218 } }
			4247 = { province_event = { id = blorc.4247 } }
			4265 = { province_event = { id = blorc.4265 } }
			4284 = { province_event = { id = blorc.4284 } }
			4266 = { province_event = { id = blorc.4266 } }
			4350 = { province_event = { id = blorc.4350 } }
			4311 = { province_event = { id = blorc.4311 } }
			4323 = { province_event = { id = blorc.4323 } }
		}
	}
	if = {
		limit = { FROM = { primary_culture = black_orc } }
		blorc_hold_trophy_remove = yes # remove trophies from Blorcs
	}
	if = {
		limit = {
			owner = { has_country_flag = rezankand_jungle_research }
			has_terrain = jungle
			is_city = no
		}
		add_province_modifier = {
			name = rezankand_jungle_specialist
			duration = 3650
		}
	}

	if = {
		limit = {
			trade_goods = gold
			NOT = { has_province_modifier = estate_burghers_control_over_gold_mine }
			owner = {
				has_estate_privilege = estate_burghers_control_over_the_mint
			}
		}
		add_province_modifier = {
			name = estate_burghers_control_over_gold_mine
			duration = -1
		}
	}

	#ANBENNAR
	if = {
		limit = {
			NOT = { has_province_modifier = wine_lord_wine }
			OR = {
				owner = { has_reform = wine_lord_reform }
				owner = { has_reform = roilsard_elective }
				owner = { has_reform = wineport_merchants }
			}
		}
		hidden_effect = {
			if = {
				limit = {
					trade_goods = wine
				}
				add_province_modifier = {
					name = wine_lord_wine
					duration = -1
					hidden = yes
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_estate_privilege = artifice_invention_wine_ageifier
			}
			trade_goods = wine
		}
		hidden_effect = {
			add_province_modifier = {
				name = artifice_ageifier_bonus
				duration = -1
				hidden = yes
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_estate_privilege = artifice_invention_growth_beans
			}
			OR = {
				trade_goods = grain
				trade_goods = cocoa
				trade_goods = sugar
				trade_goods = wine
				trade_goods = tobacco
				trade_goods = spices
				trade_goods = incense
				trade_goods = tea
				trade_goods = coffee
				trade_goods = fungi
				trade_goods = serpentbloom
			}
		}
		hidden_effect = {
			add_province_modifier = {
				name = artifice_growthbeans_bonus
				duration = -1
				hidden = yes
			}
		}
	}
	if = {
		limit = {
			trade_goods = gems
			has_port = yes
			owner = {
				has_estate_privilege = artifice_invention_pearl_cultivators
			}
		}
		hidden_effect = {
			add_province_modifier = {
				name = artifice_pearl_cultivator_bonus
				duration = -1
				hidden = yes
			}
		}
	}
	if = {
		limit = {
			OR = {
				has_terrain = dwarven_hold
				has_terrain = dwarven_hold_surface
			}
			owner = {
				has_estate_privilege = artifice_invention_superfast_elevators
			}
		}
		hidden_effect = {
			add_province_modifier = {
				name = artifice_superfast_elevators_bonus
				duration = -1
				hidden = yes
			}
		}
	}

	if = {
		limit = { owner = { NOT = { num_of_colonists = 1 } ai = yes } is_colony = yes }
		multiply_colonysize = 0
	}
	if = {
		limit = {
			owner = { has_country_flag = phoenix_empire_the_sun_outshines_the_moon }
			culture = moon_elf
		}
		add_province_modifier = {
			name = phoenix_empire_the_sun_outshines_the_moon
			duration = -1
		}
	}
	if = {
		limit = {
			owner = { has_country_flag = jaddari_the_western_beacon_flag }
			continent = europe
			NOT = { religion = the_jadd }
		}
		add_province_modifier = {
			name = jaddari_the_western_beacon
			duration = -1
			hidden = yes
		}
	}
	if = {
		limit = {
			owner = { has_country_flag = jaddari_remnant_dhenijansar_administration_flag }
			OR = { region = rakhadesh_region region = rahen_coast_region region = dhujat_region }
		}
		add_province_modifier = {
			name = jaddari_remnant_dhenijansar_administration
			duration = -1
			hidden = yes
		}
	}

	if = {
		limit = {
			OR = {
				owner = { has_country_modifier = monstrous_nation }
				owner = { government = tribal }
				owner = { culture_is_ruinborn = yes }
			}
			OR = {
				has_province_modifier = ravelian_society
				has_province_modifier = ravelian_lodge
			}
		}
		province_event = { id = ravelian.21 }
	}

	if = {
		limit = {
			owner = {
				NOT = { tag = Z45 }
				NOT = { tag = Z26 }
			}
			has_province_modifier = vrorenwood_company
		}
		remove_province_modifier = vrorenwood_company
	}

	if = {
		limit = {
			owner = {
				NOT = {
					overlord = { has_reform = raja_reform }
					has_reform = raja_reform
				}
			}
		}
		rahen_clear_court_disaster_province_modifiers = yes
	}

	xhazobkult_set_appropriate_modifier = yes

	if = {
		limit = { has_province_modifier = ghavaanaj_white_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_white_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_white_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_white_herd_locked duration = -1 }
	}
	if = {
		limit = { has_province_modifier = ghavaanaj_red_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_red_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_red_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_red_herd_locked duration = -1 }
	}
	if = {
		limit = { has_province_modifier = ghavaanaj_purple_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_purple_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_purple_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_purple_herd_locked duration = -1 }
	}
	if = {
		limit = { has_province_modifier = ghavaanaj_black_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_black_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_black_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_black_herd_locked duration = -1 }
	}
	if = {
		limit = { has_province_modifier = ghavaanaj_palace_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_palace_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_palace_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_palace_herd_locked duration = -1 }
	}
	if = {
		limit = { has_province_modifier = ghavaanaj_castle_herd_unlocked owner = { NOT = { has_country_flag = ghavaanaj_castle_herd_unlocked_flag } } }
		remove_province_modifier = ghavaanaj_castle_herd_unlocked
		add_permanent_province_modifier = { name = ghavaanaj_castle_herd_locked duration = -1 }
	}

	ghavaanaj_update_herd_size_provinces_on_province_owner_change = yes

	if = {
		limit = { owner = { tag = I89 NOT = { has_country_flag = centaur_no_zeal } } }
		trigger_switch = {
			on_trigger = superregion

			bulwar_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = burning_spear_revolt } has_faction = burning_spear } }
					add_province_modifier = { name = centaur_burning_spear_territory duration = -1 }
				}
			}
			escann_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = verdant_bliss_revolt } has_faction = verdant_bliss } }
					add_province_modifier = { name = centaur_verdant_bliss_territory duration = -1 }
				}
			}
			deepwoods_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = verdant_bliss_revolt } has_faction = verdant_bliss } }
					add_province_modifier = { name = centaur_verdant_bliss_territory duration = -1 }
				}
			}
			rahen_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = tiger_bane_revolt } has_faction = tiger_bane } }
					add_province_modifier = { name = centaur_tiger_bane_territory duration = -1 }
				}
			}
			south_haless_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = tiger_bane_revolt } has_faction = tiger_bane } }
					add_province_modifier = { name = centaur_tiger_bane_territory duration = -1 }
				}
			}
			gerudia_superregion = {
				if = {
					limit = { owner = { NOT = { has_country_flag = raging_blizzard_revolt } has_faction = raging_blizzard } }
					add_province_modifier = { name = centaur_raging_blizzard_territory duration = -1 }
				}
			}
		}
		trigger_switch = {
			on_trigger = region

			alenic_frontier_region = {
				if = {
					limit = { owner = { NOT = { has_country_flag = raging_blizzard_revolt } has_faction = raging_blizzard } }
					add_province_modifier = { name = centaur_raging_blizzard_territory duration = -1 }
				}
			}
			dragon_coast_region = {
				if = {
					limit = { owner = { NOT = { has_country_flag = raging_blizzard_revolt } has_faction = raging_blizzard } }
					add_province_modifier = { name = centaur_raging_blizzard_territory duration = -1 }
				}
			}
		}
		if = {
			limit = {
				owner = { NOT = { has_country_flag = vine_tearer_revolt } has_faction = vine_tearer }
				continent = africa
				NOT = { superregion = bulwar_superregion }
			}
			add_province_modifier = { name = centaur_vine_tearer_territory duration = -1 }
		}
		if = {
			limit = {
				owner = { NOT = { has_country_flag = rosen_rider_revolt } has_faction = rosen_rider }
				superregion = western_cannor_superregion
				NOT = { region = alenic_frontier_region }
				NOT = { region = dragon_coast_region }
			}
			add_province_modifier = { name = centaur_rosen_rider_territory duration = -1 }
		}
	}

	#Seinathil Sheetmusic Bonuses
	if = {
		limit = {
			NOT = { has_province_modifier = A90_sheet_music_1 }
			owner = { has_country_flag = seinathil_paper1 }
		}
		hidden_effect = {
			if = {
				limit = {
					trade_goods = paper
				}
				add_province_modifier = {
					name = A90_sheet_music_1
					duration = -1
					hidden = yes
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { has_province_modifier = A90_sheet_music_2 }
			owner = { has_country_flag = seinathil_paper2 }
		}
		hidden_effect = {
			if = {
				limit = {
					trade_goods = paper
				}
				add_province_modifier = {
					name = A90_sheet_music_2
					duration = -1
					hidden = yes
				}
			}
		}
	}
	if = {
		limit = {
			owner = { tag = Y98 has_country_flag = Y98_improved_silk_flag }
			trade_goods = silk
			NOT = {
				has_province_modifier = Y98_improved_silk_mod
			}
		}
		hidden_effect = {
			add_province_modifier = {
				name = Y98_improved_silk_mod
				duration = -1
				hidden = yes
			}
		}
	}

	# Removed degenerated Ruinborn from province and potentially infestation
	if = {
		limit = { culture = bloodfeeders }
		province_event = { id = infestation_bloodfeeder.2001 }
	}
	else_if = {
		limit = { culture = silent_watchers }
		province_event = { id = infestation_silent_watcher.2001 }
	}
	else_if = {
		limit = { culture = ice_sleepers }
		province_event = { id = infestation_ice_sleeper.2001 }
	}

	if = {
		limit = { owner = { is_subject_of_type = acolyte_dominion } }
		owner = {
			change_variable = { aInfluence = 2 }
			every_known_country = {
				limit = { is_subject_of_type = acolyte_dominion }
				ROOT = { remove_claim = PREV }
			}
		}
	}

	if = {
		limit = {
			region = akan_region
			has_terrain = mountain
			religion = mother_akan
			owner = { religion = mother_akan }
			NOT = { has_province_modifier = akan_ascetic_cult }
		}
		add_permanent_province_modifier = {
			name = akan_ascetic_cult
			duration = -1
		}
		REB = { change_variable = { akan_mountains = 1 } }
		every_country = {
			limit = { religion = mother_akan }
			country_event = { id = mother_akan.3 }
		}
	}
	else_if = {
		limit = {
			region = akan_region
			has_terrain = mountain
			NOT = { owner = { religion = mother_akan } }
			has_province_modifier = akan_ascetic_cult
		}
		remove_province_modifier = akan_ascetic_cult
		REB = { subtract_variable = { akan_mountains = 1 } }
		every_country = {
			limit = { religion = mother_akan }
			country_event = { id = mother_akan.3 }
		}
	}

	if = {
		limit = {
			province_id = 912
			has_province_modifier = incomplete_hold
			NOT = { owned_by = A73 }
		}
		remove_province_modifier = incomplete_hold
		add_permanent_province_modifier = {
			name = incomplete_hold_0
			duration = -1
		}
	}

	if = {
		limit = {
			province_id = 912
			has_province_modifier = incomplete_hold_0
			owned_by = A73
		}
		remove_province_modifier = incomplete_hold_0
		add_permanent_province_modifier = {
			name = incomplete_hold
			duration = -1
		}
	}


	province_event = { id = roadwarrior.6 days = 3 } #Roadwarrior looting stuff

	on_province_owner_change_estate_privileges_effect = yes
	province_event = { id = race_setup_events.15 days = 1 }

	#reapply dungeon flags
	if = {
		limit = { has_dwarovar_dungeon = yes }
		dungeon_ownership_reset_effect = yes
	}

	#dwarovar expeditions
	if = {
		limit = {
			OR = {
				has_province_modifier = expedition_target
				has_dwarovar_dungeon = yes
			}
		}
		generate_expedition = { base_floor = 1 base_danger = 1 }
		expedition_dead_effect = yes
		FROM = { clr_country_flag = expedition_happening }
		clr_province_flag = sent_expedition_@FROM
		clr_province_flag = generated_party_stats_@FROM
		if = { #re-add country flag to new owner if they already have an expedition elsewhere
			limit = {
				owner = { any_owned_province = { has_province_flag = sent_expedition_@owner } }
			}
			owner = { set_country_flag = expedition_happening }
		}
		if = { #re-add country flag to old owner if necessary
			limit = {
				FROM = { any_owned_province = { has_province_flag = sent_expedition_@owner } }
			}
			FROM = { set_country_flag = expedition_happening }
		}
		#reapply gems
		respawn_dwarovkron_fragments = yes
	}

	#hold migration digging/repairing exploits
	if = {
		limit = {
			province_group = hold_province
			is_city = no
		}
		if = {
			limit = { has_advanced_hold_infrastructure = yes }
			set_province_flag = specialized_hold
		}
		if = {
			limit = {
				FROM = {
					capital_scope = {
						OR = {
							has_construction = digging_deeper
							has_construction = restoring_hold
						}
					}
					NOT = { num_of_cities = 2 } #abandoned colony
				}
			}
			FROM = {
				capital_scope = { cancel_construction = yes }
				if = {
					limit = { has_country_flag = is_digging }
					FROM = {
						clr_country_flag = is_digging
						clr_country_flag = dig_prod
						clr_country_flag = dig_manpower
						clr_country_flag = dig_culture
						clr_country_flag = dig_explosive
						remove_country_modifier = dig_prod
						remove_country_modifier = dig_manpower
						remove_country_modifier = dig_explosive
					}
				}
			}
		}
	}

	#seghdihr military modifiers
	if = {
		limit = {
			owned_by = H78
			H78 = { has_reform = seghdihr_segbandalic_military }
		}
		if = {
			limit = { province_group = segbandal_hold_province }
			add_province_modifier = { name = seghdihr_reform_holds duration = -1 hidden = yes }
		}
		else = { add_province_modifier = { name = seghdihr_reform_non_holds duration = -1 hidden = yes } }
	}

	#azjakuma events
	if  = {
		limit = {
			OR = {
				owned_by = Y01
				FROM = { tag = Y01 }
				owner = {
					is_subject_of = Y01
					NOT = { is_subject_of_type = tributary_state }
				}
			}
		}
		province_event = {
			id = flavor_azjakuma.2500
		}
	}
	owner = { country_event = { id = flavor_azjakuma.2801 days = 5 } }

	#Dhenijanrai events
	if = {
		limit = {
			province_id = 4265 # Grozumdihr
			owner = { mission_completed = R51_peridot_king }
			NOT = { exists = I18 }
		}
		owner = { country_event = { id = flavor_dhenijanraj.300 } }
	}

	#Ynn
	owner = { country_event = { id = ynn_events.2 } }
	FROM = { country_event = { id = ynn_events.2 } }
	province_event = { id = ynn_events.23 }	#Pomentere Estates modifier

	#reduced dev cost in capital state, adds modifier when gaining provinces in capital state
	if = {
		limit = {
			owner = {
				has_government_attribute = lower_dev_cost_in_capital_state
				ROOT = {
					area_for_scope_province = {
						is_capital_of = PREV
					}
					NOT = { has_province_modifier = lower_dev_cost_in_capital_state_modifier }
				}
			}
		}
		add_province_modifier = {
			name = lower_dev_cost_in_capital_state_modifier
			duration = -1
			hidden = yes
		}
	}

	#Orlghelovar (I12)
	if = {
		limit = {
			trade_goods = glass
			owner = { tag = I12 }
		}
		if = {
			limit = {
				owner = {
					OR = {
						has_reform = orlghelovar_glasslords
						has_reform = orlghelovar_science
					}
				}
				NOT = { has_province_modifier = orlghelovar_glasslord_glass }
			}
			add_province_modifier = { name = orlghelovar_glasslord_glass duration = -1 hidden = yes }
		}
		if = {
			limit = {
				owner = { has_reform = orlghelovar_glass_worker_reform }
				NOT = { has_province_modifier = orlghelovar_reformed_glassworkers }
			}
			add_province_modifier = { name = orlghelovar_reformed_glassworkers duration = -1 hidden = yes }
		}
		if = {
			limit = {
				owner = { has_country_modifier = orlghelovar_sapphire_glass }
				NOT = { has_province_modifier = orlghelovar_glass_value }
			}
			add_province_modifier = { name = orlghelovar_glass_value duration = -1 hidden = yes }
		}
	}

	if = {
		limit = {
			culture = no_culture
		}
		change_culture = owner
	}
	if = {
		limit = {
			religion = no_religion
		}
		change_religion = owner
	}
	#Add Grain to Grain Lords
	if = {
        limit = {
            NOT = { has_province_modifier = barumand_lord_grain}
                owner = { has_reform = barumand_grain_lords_reform }
        }
        hidden_effect = {
            if = {
                limit = {
                    trade_goods = grain
                }
                add_province_modifier = {
                    name = barumand_lord_grain
                    duration = -1
                    hidden = yes
                }
            }
        }
    }
	#Newshire
	if = {
		limit = {
			OR = {
				trade_goods = grain
				trade_goods = livestock
			}
			owner = { 
				OR = {
					has_reform = newshire_stewardship
					has_reform = newshire_high_stewardship
				}
			}
		}
		add_province_modifier = {
			name = newshire_stewardship_boost
			duration = -1
			hidden = yes
		}
	}

	#Harpy roosts
	if = {
		limit = { has_province_modifier = harpy_roost }
		owner = {
			if = {
				limit = { has_country_modifier = harpy_administration }
				update_roost_count = yes
			}
			every_known_country = {
				limit = { has_country_modifier = harpy_administration }
				update_roost_count = yes
			}
		}
	}


 # TRADE GOODS EXPANDED
	#if = {
	#	limit = {
	#		ROOT = { trade_goods = silver }
	#		NOT = { has_province_modifier = silver_debuff }
	#	}
	#	add_province_modifier = { 
	#		name = silver_debuff
	#		duration = -1
	#		hidden = yes	
	#	}
	#}

	###cannon_foundry
	if = {
		limit = {
			AND = {
				ROOT = { has_building = cannon_foundry NOT = { has_building = off_1 } }
				owner = { check_variable = { which = copper value = 0.4 } check_variable = { which = tin value = 0.3 } }	
			}
		}
		owner = {
			subtract_variable = { which = copper value = 0.4 }      
			subtract_variable = { which = tin value = 0.3 }        
			change_variable = { which = copper_used value = 0.4 }        
			change_variable = { which = tin_used value = 0.3 }         		
			change_variable = { which = cannon_foundry_amount value = 1 }         
		}
		FROM = {
			change_variable = { which = copper value = 0.4 }      
			change_variable = { which = tin value = 0.3 }        
			subtract_variable = { which = copper_used value = 0.4 }        
			subtract_variable = { which = tin_used value = 0.3 } 
			subtract_variable = { which = cannon_foundry_amount value = 1 }         			
		}
	}
	else_if = {
		limit = {
			AND = {
				ROOT = { has_building = cannon_foundry NOT = { has_building = off_1 } }	
				owner = { NOT = { check_variable = { which = copper value = 0.4 } check_variable = { which = tin value = 0.3 } } }
			}
		}
		owner = {
			change_variable = { which = copper_used value = 0.4 }        
			change_variable = { which = tin_used value = 0.3 }
			change_variable = { which = cannon_foundry_amount value = 1 }
		}
		FROM = {
			subtract_variable = { which = copper_used value = 0.4 }        
			subtract_variable = { which = tin_used value = 0.3 }
			subtract_variable = { which = cannon_foundry_amount value = 1 } 
		}
	}
	if = {
		limit = { AND = { has_building = cannon_foundry has_building = off_1 } }
		owner = {
			change_variable = {            
				which = cannon_foundry_amount
				value = 1
			}
		}
		FROM = {
			subtract_variable = {            
				which = cannon_foundry_amount
				value = 1
			}
		}
	}
	###metalworking_workshop
	if = {
		limit = {
			AND = {
				ROOT = { has_building = metalworking_workshop NOT = { has_building = off_2 } }
				owner = { check_variable = { which = iron value = 1.0 } }	
			}
		}
		owner = {
			subtract_variable = { which = iron value = 1.0 }             
			change_variable = { which = iron_used value = 1.0 }              		
			change_variable = { which = metalworking_workshop_amount value = 1 }         
		}
		FROM = {
			change_variable = { which = iron value = 1.0 }           
			subtract_variable = { which = iron_used value = 1.0 }        
			subtract_variable = { which = metalworking_workshop_amount value = 1 }         			
		}
	}
	else_if = {
		limit = {
			AND = {
				ROOT = { has_building = metalworking_workshop NOT = { has_building = off_2 } }	
				owner = { NOT = { check_variable = { which = iron value = 1.0 } } }
			}
		}
		owner = {
			change_variable = { which = iron_used value = 1.0 }        
			change_variable = { which = metalworking_workshop_amount value = 1 }
		}
		FROM = {
			subtract_variable = { which = iron_used value = 1.0 }        
			subtract_variable = { which = metalworking_workshop_amount value = 1 } 
		}
	}
	if = {
		limit = { AND = { has_building = metalworking_workshop has_building = off_2 } }
		owner = {
			change_variable = {            
				which = metalworking_workshop_amount
				value = 1
			}
		}
		FROM = {
			subtract_variable = {            
				which = metalworking_workshop_amount
				value = 1
			}
		}
	}
	###munition_factory
	if = {
		limit = {
			AND = {
				ROOT = { has_building = munition_factory NOT = { has_building = off_3 } }
				owner = { check_variable = { which = lead value = 1.0 } }	
			}
		}
		owner = {
			subtract_variable = { which = lead value = 1.0 }             
			change_variable = { which = lead_used value = 1.0 }              		
			change_variable = { which = munition_factory_amount value = 1 }         
		}
		FROM = {
			change_variable = { which = lead value = 1.0 }           
			subtract_variable = { which = lead_used value = 1.0 }        
			subtract_variable = { which = munition_factory_amount value = 1 }         			
		}
	}
	else_if = {
		limit = {
			AND = {
				ROOT = { has_building = munition_factory NOT = { has_building = off_3 } }	
				owner = { NOT = { check_variable = { which = lead value = 1.0 } } }
			}
		}
		owner = {
			change_variable = { which = lead_used value = 1.0 }        
			change_variable = { which = munition_factory_amount value = 1 }
		}
		FROM = {
			subtract_variable = { which = lead_used value = 1.0 }        
			subtract_variable = { which = munition_factory_amount value = 1 } 
		}
	}
	if = {
		limit = { AND = { has_building = munition_factory has_building = off_3 } }
		owner = {
			change_variable = {            
				which = munition_factory_amount
				value = 1
			}
		}
		FROM = {
			subtract_variable = {            
				which = munition_factory_amount
				value = 1
			}
		}
	}
	###spectacle_factory
	if = {
		limit = {
			AND = {
				ROOT = { has_building = spectacle_factory NOT = { has_building = off_5 } }
				owner = { check_variable = { which = glass value = 0.6 } }	
			}
		}
		owner = {
			subtract_variable = { which = glass value = 0.6 }             
			change_variable = { which = glass_used value = 0.6 }              		
			change_variable = { which = spectacle_factory_amount value = 1 }         
		}
		FROM = {
			change_variable = { which = glass value = 0.6 }           
			subtract_variable = { which = glass_used value = 0.6 }        
			subtract_variable = { which = spectacle_factory_amount value = 1 }         			
		}
	}
	else_if = {
		limit = {
			AND = {
				ROOT = { has_building = spectacle_factory NOT = { has_building = off_5 } }	
				owner = { NOT = { check_variable = { which = glass value = 0.6 } } }
			}
		}
		owner = {
			change_variable = { which = glass_used value = 0.6 }        
			change_variable = { which = spectacle_factory_amount value = 1 }
		}
		FROM = {
			subtract_variable = { which = glass_used value = 0.6 }        
			subtract_variable = { which = spectacle_factory_amount value = 1 } 
		}
	}
	if = {
		limit = { AND = { has_building = spectacle_factory has_building = off_5 } }
		owner = {
			change_variable = {            
				which = spectacle_factory_amount
				value = 1
			}
		}
		FROM = {
			subtract_variable = {            
				which = spectacle_factory_amount
				value = 1
			}
		}
	}
	###steam_engine_manu
	if = {
		limit = {
			AND = {
				ROOT = { has_building = steam_engine_manu NOT = { has_building = off_4 } }
				owner = { check_variable = { which = copper value = 0.4 } check_variable = { which = zinc value = 0.3 } }	
			}
		}
		owner = {
			subtract_variable = { which = copper value = 0.4 }      
			subtract_variable = { which = zinc value = 0.3 }        
			change_variable = { which = copper_used value = 0.4 }        
			change_variable = { which = zinc_used value = 0.3 }         		
			change_variable = { which = steam_engine_manu_amount value = 1 }         
		}
		FROM = {
			change_variable = { which = copper value = 0.4 }      
			change_variable = { which = zinc value = 0.3 }        
			subtract_variable = { which = copper_used value = 0.4 }        
			subtract_variable = { which = zinc_used value = 0.3 } 
			subtract_variable = { which = steam_engine_manu_amount value = 1 }         			
		}
	}
	else_if = {
		limit = {
			AND = {
				ROOT = { has_building = steam_engine_manu NOT = { has_building = off_4 } }	
				owner = { NOT = { check_variable = { which = copper value = 0.4 } check_variable = { which = zinc value = 0.3 } } }
			}
		}
		owner = {
			change_variable = { which = copper_used value = 0.4 }        
			change_variable = { which = zinc_used value = 0.3 }
			change_variable = { which = steam_engine_manu_amount value = 1 }
		}
		FROM = {
			subtract_variable = { which = copper_used value = 0.4 }        
			subtract_variable = { which = zinc_used value = 0.3 }
			subtract_variable = { which = steam_engine_manu_amount value = 1 } 
		}
	}
	if = {
		limit = { AND = { has_building = steam_engine_manu has_building = off_4 } }
		owner = {
			change_variable = {            
				which = steam_engine_manu_amount
				value = 1
			}
		}
		FROM = {
			subtract_variable = {            
				which = steam_engine_manu_amount
				value = 1
			}
		}
	}


	FROM = { 
		country_event = { id = New_TradeGood_Events.2 days = 1 }
	}
	owner = {
		country_event = { id = New_TradeGood_Events.2 days = 1 }
	} 


}